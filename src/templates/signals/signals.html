{% extends 'index.html' %}

{% load i18n %}
{% load crispy_forms_tags %}

{% block content %}

<div class="row">
    <div class="col-3">
        <form method="GET" id="filterSignalsForm">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Search</h5>
                    <div class="input-group">
                        <input class="form-control border" data-mdb-ripple-init data-mdb-tooltip-init
                            data-mdb-placement="bottom"
                            title="Search field is used to search for signals by name and description." type="search"
                            name="{{ filter.form.search.name }}" id="searchSignalInput" placeholder="Search"
                            title="Enter search keyword"
                            value="{% if filter.form.search.value %}{{ filter.form.search.value }}{% endif %}" />
                    </div>
                    <div class="input-group margin-top-1rem">
                        {{ form.active|as_crispy_field}}
                    </div>
                    <div class="accordion accordion-flush" id="accordionSignalFilters">
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="flush-heading_{{ form.pathogen.auto_id }}">
                                <button data-mdb-collapse-init class="accordion-button collapsed" type="button"
                                    data-mdb-toggle="collapse" data-mdb-target="#flush-collapse_{{ form.pathogen.auto_id }}"
                                    aria-expanded="false" aria-controls="flush-collapse_{{ form.pathogen.auto_id }}">
                                    Pathogen / Syndrome
                                </button>
                            </h2>
                            <div id="flush-collapse_{{ form.pathogen.auto_id }}" class="accordion-collapse {% if form.pathogen.value %} {% else %}collapse{% endif %}"
                                aria-labelledby="flush-heading_{{ form.pathogen.auto_id }}" data-mdb-parent="#accordionSignalFilters">
                                <div class="accordion-body margin-top-1rem">
                                    <div class="bulk-select form-check">
                                        <input type="checkbox" class="form-check-input" id="select-all">
                                        <label class="form-check-label" for="select-all">Select all</label>
                                    </div>
                                    <div id="div_id_pathogen" class="mb-3">
                                        <div>
                                            {{ form.pathogen|as_crispy_field }}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="flush-heading_{{ form.geographic_scope.auto_id }}">
                                <button data-mdb-collapse-init class="accordion-button collapsed" type="button"
                                    data-mdb-toggle="collapse" data-mdb-target="#flush-collapse_{{ form.geographic_scope.auto_id }}"
                                    aria-expanded="false" aria-controls="flush-collapse_{{ form.geographic_scope.auto_id }}">
                                    Country
                                </button>
                            </h2>
                            <div id="flush-collapse_{{ form.geographic_scope.auto_id }}" class="accordion-collapse {% if form.geographic_scope.value %} {% else %}collapse{% endif %}"
                                aria-labelledby="flush-heading_{{ form.geographic_scope.auto_id }}" data-mdb-parent="#accordionSignalFilters">
                                <div class="accordion-body margin-top-1rem">
                                    {{ form.geographic_scope|as_crispy_field }}
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="flush-heading_{{ form.available_geography.auto_id }}">
                                <button data-mdb-collapse-init class="accordion-button collapsed" type="button"
                                    data-mdb-toggle="collapse" data-mdb-target="#flush-collapse_{{ form.available_geography.auto_id }}"
                                    aria-expanded="false" aria-controls="flush-collapse_{{ form.available_geography.auto_id }}">
                                    Geo-level
                                </button>
                            </h2>
                            <div id="flush-collapse_{{ form.available_geography.auto_id }}" class="accordion-collapse {% if form.available_geography.value %} {% else %}collapse{% endif %}"
                                aria-labelledby="flush-heading_{{ form.available_geography.auto_id }}" data-mdb-parent="#accordionSignalFilters">
                                <div class="accordion-body margin-top-1rem">
                                    <div class="bulk-select form-check">
                                        <input type="checkbox" class="form-check-input" id="select-all">
                                        <label class="form-check-label" for="select-all">Select all</label>
                                    </div>
                                    {{ form.available_geography|as_crispy_field }}
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="flush-heading_{{ form.severenity_pyramid_rungs.auto_id }}">
                                <button data-mdb-collapse-init class="accordion-button collapsed" type="button"
                                    data-mdb-toggle="collapse" data-mdb-target="#flush-collapse_{{ form.severenity_pyramid_rungs.auto_id }}"
                                    aria-expanded="false" aria-controls="flush-collapse_{{ form.severenity_pyramid_rungs.auto_id }}">
                                    Severity Pyramid
                                </button>
                            </h2>
                            <div id="flush-collapse_{{ form.severenity_pyramid_rungs.auto_id }}" class="accordion-collapse {% if form.severenity_pyramid_rungs.value %} {% else %}collapse{% endif %}"
                                aria-labelledby="flush-heading_{{ form.severenity_pyramid_rungs.auto_id }}" data-mdb-parent="#accordionSignalFilters">
                                <div class="accordion-body margin-top-1rem">
                                    <div class="bulk-select form-check">
                                        <input type="checkbox" class="form-check-input" id="select-all">
                                        <label class="form-check-label" for="select-all">Select all</label>
                                    </div>
                                    {{ form.severenity_pyramid_rungs|as_crispy_field }}
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="flush-heading_{{ form.source.auto_id }}">
                                <button data-mdb-collapse-init class="accordion-button collapsed" type="button"
                                    data-mdb-toggle="collapse" data-mdb-target="#flush-collapse_{{ form.source.auto_id }}"
                                    aria-expanded="false" aria-controls="flush-collapse_{{ form.source.auto_id }}">
                                    Data Source
                                </button>
                            </h2>
                            <div id="flush-collapse_{{ form.source.auto_id }}" class="accordion-collapse {% if form.source.value %} {% else %}collapse{% endif %}"
                                aria-labelledby="flush-heading_{{ form.source.auto_id }}" data-mdb-parent="#accordionSignalFilters">
                                <div class="accordion-body margin-top-1rem">
                                    <div class="bulk-select form-check">
                                        <input type="checkbox" class="form-check-input" id="select-all">
                                        <label class="form-check-label" for="select-all">Select all</label>
                                    </div>
                                    {{ form.source|as_crispy_field }}
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="flush-heading_{{ form.time_type.auto_id }}">
                                <button data-mdb-collapse-init class="accordion-button collapsed" type="button"
                                    data-mdb-toggle="collapse" data-mdb-target="#flush-collapse_{{ form.time_type.auto_id }}"
                                    aria-expanded="false" aria-controls="flush-collapse_{{ form.time_type.auto_id }}">
                                    Temporal Granularity
                                </button>
                            </h2>
                            <div id="flush-collapse_{{ form.time_type.auto_id }}" class="accordion-collapse {% if form.time_type.value %} {% else %}collapse{% endif %}"
                                aria-labelledby="flush-heading_{{ form.time_type.auto_id }}" data-mdb-parent="#accordionSignalFilters">
                                <div class="accordion-body margin-top-1rem">
                                    {{ form.time_type|as_crispy_field }}
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="flush-heading_id_signal_availability">
                                <button data-mdb-collapse-init class="accordion-button collapsed" type="button"
                                    data-mdb-toggle="collapse" data-mdb-target="#flush-collapse_id_signal_availability"
                                    aria-expanded="false" aria-controls="flush-collapse_id_signal_availability">
                                    Signal Availability
                                </button>
                            </h2>
                            <div id="flush-collapse_id_signal_availability" class="accordion-collapse {% if form.from_date.value or form.to_date.value or form.signal_availability_days.value %} {% else %}collapse{% endif %}"
                                aria-labelledby="flush-heading_id_signal_availability" data-mdb-parent="#accordionSignalFilters">
                                <div class="accordion-body margin-top-1rem">
                                    {{ form.from_date|as_crispy_field }}
                                    {{ form.to_date|as_crispy_field }}
                                    {{ form.signal_availability_days|as_crispy_field }}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="d-grid gap-2 mt-3">
                            <button id="filter-submit" type="submit" class="btn btn-primary">{% trans 'Apply Filters' %}</button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div class="col-9">
        <form methog="GET" id="orderByForm">
            <div class="row margin-bottom-1rem d-flex justify-content-end">
                    <div class="col-6">
                        <div class="input-group mb-3 d-flex justify-content-start">
                            <span class="pt-05">
                                Showing {{ signals|length }} row{{ signals|length|pluralize:"s" }}.
                            </span>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="input-group mb-3 d-flex justify-content-end">
                            <label class="input-group-text form-label" for="id_order_by" id="order_by_label" style="height: auto;">Sort By</label>
                            {{ form.order_by|as_crispy_field }}
                        </div>
                    </div>
                </div>
        </form>
    </div>
</div>

<script>

</script>

{% endblock %}
